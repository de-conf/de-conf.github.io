<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å¦‚ä½•æž„å»ºè·¯ç”±drcomè®¤è¯]]></title>
    <url>%2F2019%2F04%2Fopenwrt-dogcom%2F</url>
    <content type="text"><![CDATA[0x00. ç®€ä»‹: è¿™æ˜¯é’ˆå¯¹æˆ‘æ ¡(è¥¿å®‰çŸ³æ²¹)è·¯ç”±å™¨è®¤è¯ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆ(åŒ…æ‹¬ipv6 è®¤è¯) drcomç¨‹åºç¦æ­¢å¼€å¯çƒ­ç‚¹,ä¸ºæ­¤æœ‰å¤§ä½¬é€†å‘äº†drcomç¨‹åº,åˆ†æžå‡ºäº†è®¤è¯æ•°æ®åŒ…çš„å…³é”®å­—,å¹¶ä¸”æ¨¡æ‹Ÿäº†è®¤è¯æ•°æ®åŒ…,ç¨‹åºæ ¸å¿ƒæ˜¯å‘é€è®¤è¯æ•°æ®åŒ…ç»´æŒå¿ƒè·³åŒ…,ç”±äºŽè·³è¿‡äº†drcomç¨‹åº,æ‰€ä»¥å¯ä»¥ä½¿å¾—ä¸€ç›´ä¿æŒåœ¨çº¿çŠ¶æ€. ç¨‹åºå·²ç»å¼€æº,æœ‰pythonç‰ˆæœ¬,å’ŒCè¯­è¨€ç‰ˆæœ¬æœ¬æ–‡ä¸»è¦è®°å½•Cè¯­è¨€ç‰ˆæœ¬ä½¿ç”¨æ–¹æ³•(pythonå¯¹äºŽå°å®¹é‡nand flashé—ªå­˜èŠ¯ç‰‡å°±æ˜¯ç¾éš¾,æ ¹æœ¬æ”¾ä¸ä¸‹)0x01. OpenWrtç®€ä»‹:OpenWrté¡¹ç›®æ˜¯ä¸€ä¸ªé’ˆå¯¹åµŒå…¥å¼è®¾å¤‡çš„Linuxæ“ä½œç³»ç»Ÿã€‚OpenWrtä¸æ˜¯ä¸€ä¸ªå•ä¸€ä¸”ä¸å¯æ›´æ”¹çš„å›ºä»¶ï¼Œè€Œæ˜¯æä¾›äº†å…·æœ‰è½¯ä»¶åŒ…ç®¡ç†åŠŸèƒ½çš„å®Œå…¨å¯å†™çš„æ–‡ä»¶ç³»ç»Ÿã€‚(åˆ’é‡ç‚¹: Linux,å¯å†™æ–‡ä»¶ç³»ç»Ÿ)0x01 .1å¦‚ä½•ä½¿ç”¨OpenWrt å‡†å¤‡å·¥ä½œ:0.1 ä¸€ä¸ªä»»æ„Linuxå‘è¡Œç‰ˆ(å¦‚æžœä½ ä½¿ç”¨win,éœ€è¦å‡†å¤‡è™šæ‹Ÿæœº)0.2 ç½‘çº¿,è·¯ç”±å™¨ ç¡¬ä»¶åŸºç¡€æ”¯æŒçš„è®¾å¤‡ è§é“¾æŽ¥ å¦‚ä½•åˆ·å…¥é«˜åº¦å±é™© é£Žé™©æç¤º:è¯¯æ“ä½œå¯èƒ½å¯¼è‡´è·¯ç”±å™¨å˜ç –(æ— ç¼–ç¨‹å™¨å¯èƒ½å¯¼è‡´æŠ¥åºŸ)æŸäº›è®¾å¤‡æ”¯æŒç›´æŽ¥åˆ·å…¥(eg:linksyswrt ç³»åˆ—æŸäº›ä¸æ”¯æŒç›´æŽ¥åˆ·å…¥(eg: å°ç±³è·¯ç”±é’æ˜¥ç‰ˆç›¸å…³ä¿¡æ¯å¯ä»¥æŸ¥é˜… goole ä½ çš„è®¾å¤‡åž‹å· openwrtæ¥åˆ¤æ–­å¦å¤–,æŽ¨èä½¿ç”¨OpenWrtå®˜æ–¹å›ºä»¶ æ³¨æ„,ç‰ˆæœ¬æœ€å¥½ä¸ºCurrent Stable Release(æˆ–è‡ªå·±æž„å»º),æ¯•ç«Ÿä½ ä¸çŸ¥é“ä»–äººå›ºä»¶é‡Œæœ‰æ²¡æœ‰ç§è´§,è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ä¸‹æ–‡ä¸­çš„SDKå’Œåˆ·å…¥ç‰ˆæœ¬éœ€è¦ä¸€è‡´,ä¸ç„¶ä¼šé‡åˆ°ç¼–è¯‘å‡ºæ¥çš„å®‰è£…åŒ…æ— æ³•å®‰è£…çš„é—®é¢˜!!!OpenWrtå®˜æ–¹å›ºä»¶åˆ·å…¥ä¸‹è½½åœ°å€0x02. æž„å»ºdrcomå®‰è£…åŒ… (win: æ‰“å¼€è™šæ‹Ÿæœº,é€‰æ‹©natç½‘ç»œæ¨¡å¼,æ‰“å¼€ä½ çš„Linuxå‘è¡Œç‰ˆ æŸ¥çœ‹å‘çŽ°ç‰ˆå‘½ä»¤ lsb_release -a æ ¹æ®è‡ªå·±çš„Linuxå‘è¡Œç‰ˆå®‰è£…å¿…è¦çš„ä¾èµ–å‚è€ƒé“¾æŽ¥ ä¸‹è½½OpenWrt SDKä½¿ç”¨ssh è¿žæŽ¥è·¯ç”±cat /proc/cpuinfoæŸ¥çœ‹è·¯ç”±ä¿¡æ¯æ ¹æ®è·¯ç”±é€‰æ‹©SDK (è¿™é‡Œä»¥å¸¸ç”¨çš„mtk7620èŠ¯ç‰‡ä¸¾ä¾‹)ä¸‹è½½åœ°å€: https://downloads.openwrt.org/ ä¸‹è½½openwrt-sdk-18.06.1-ramips-mt7620_gcc-7.3.0_musl.Linux-x86_64.tar.xzæ³¨æ„æ˜¯æœ‰gccçš„!123$ wget https://downloads.openwrt.org/releases/18.06.2/targets/ramips/mt7620/openwrt-sdk-18.06.1-ramips-mt7620_gcc-7.3.0_musl.Linux-x86_64.tar.xz #mtk7620 SDK$ tar -vxf openwrt-sdk*$ cd openwrt-sdk* æŽ¥ä¸‹æ¥æ‹‰å–drcomæºç 12$ git clone https://github.com/mchome/openwrt-dogcom.git package/openwrt-dogcom$ git clone https://github.com/mchome/luci-app-dogcom.git package/luci-app-dogcom æŽ¥ä¸‹æ¥ç¼–è¯‘è·¯ç”±å®‰è£…åŒ…12$ make package/openwrt-dogcom/compile$ make package/luci-app-dogcom/compile å¦‚æžœæ²¡æœ‰é—®é¢˜,çŽ°åœ¨å°±å·²ç»æž„å»ºå¥½äº†çŽ°åœ¨å¯ä»¥åŽ»å½“å‰ç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°dogcom.ipk,luci-app-dogcom.ipk,ä¹‹åŽcdè¿›è¯¥ç›®å½•/åœ¨æ­¤å¤„æ‰“å¼€ç»ˆç«¯ 0x03 å®‰è£…dogcomå®‰è£…åŒ…,å¯åŠ¨è®¤è¯ç¨‹åº ä¸Šä¼ å¹¶å®‰è£…dogcomè½¯ä»¶ 1234$scp dogcom*.ipk luci-app-dogcom*.ipk root@192.168.1.1:/rooot/$ ssh root@192.168.1.1root@OpenWrt:~# ls #æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦ä¸Šä¼ æˆåŠŸroot@OpenWrt:~# opkg install dogcom*.ipk luci-app-dogcom*.ipk çŽ°åœ¨å¯ä»¥æŠŠç½‘çº¿æ’å…¥è·¯ç”±å™¨çš„wanå£äº† ä¿®æ”¹é…ç½®æ–‡ä»¶1.ç™»å½•è·¯ç”±å™¨ssh root@192.168.1.12.ä¿®æ”¹é…ç½®æ–‡ä»¶vim /etc/dogcom.conf123456789101112131415server = '192.168.255.249'username='***********' #æ ¡å›­ç½‘è´¦å·password='***********' #æ ¡å›­ç½‘å¯†ç CONTROLCHECKSTATUS = '\x20'ADAPTERNUM = '\x05'host_ip = '10.29.6.70' #ä¸»æœºåœ°å€IPDOG = '\x01'host_name = 'boom' PRIMARY_DNS = '10.200.4.1'dhcp_server = '10.29.6.254' #æ¥¼å±‚è·¯ç”±åœ°å€AUTH_VERSION = '\x0a\x00'mac = 0xb025aa1 #macåœ°å€ï¼Œå‰é¢åŠ 0xhost_os = 'Windows'KEEP_ALIVE_VERSION = '\xdc\x02'ror_version = False ä¿®æ”¹å¥½äº†ä¹‹åŽ:wqä¿å­˜é€€å‡º å¯åŠ¨drcomç¨‹åº/etc/init.d/dogcom start && /etc/init.d/dogcom enable æµ‹è¯•è¿žé€šæ€§æ–¹æ³•ä¸€: ping baidu.comäºŒ: æ‰“å¼€ http://192.168.255.249/ çœ‹æ˜¯å¦åœ¨çº¿ä¸‰: ps |grep dogcom #çœ‹æ˜¯å¦æœ‰dogcomè¿›ç¨‹0x04 æ·»åŠ ipv6è®¤è¯æ¦‚è¿°:ç”±äºŽæˆ‘æ ¡æ–°åŠ äº†ipv6è®¤è¯,æ‰€ä»¥ipv6è®¿é—®ä¼šå‡ºçŽ°ä¸€å®šé—®é¢˜.ç»è¿‡è§‚å¯Ÿ,å‘çŽ°è®¿é—®ipv6åœ°å€æ—¶æµè§ˆå™¨ä¼šè·³è½¬åˆ° http://192.168.255.249,æ‰€ä»¥æŠ“äº†ä¸€æ¬¡åŒ…,wiresharkæˆªå›¾å¦‚ä¸‹æ‰€ä»¥ipv6è®¤è¯æ–¹å¼æ˜¾è€Œæ˜“è§,æ˜¯é€šè¿‡ä¸€æ¬¡GETè¯·æ±‚æ¥å®žçŽ°çš„,æ¨¡æ‹Ÿè¿™ä¸€è¿‡ç¨‹å°±å¥½!ä¾èµ–è½¯ä»¶opkg update && opkg install curlå¦‚æžœé‡åˆ°è¶…æ—¶,éœ€è¦æ¢ä¸‹openwrtçš„æºsed -i 's/downloads.openwrt.org/mirrors.ustc.edu.cn\/lede/g' /etc/opkg/distfeeds.confipv6-authè„šæœ¬vim /etc/ipv6-auth.sh12345678910111213141516171819#! /bin/ship6=`ip address show | grep "2001" |awk '{print $2}' |cut -d '/' -f 1`number=0while [ -z $ip6 ]; do sleep 3 ip6=`ip address show | grep "2001" |awk '{print $2}' |cut -d '/' -f 1` number ++ if [ $number -gt 6 ]; then break; fidoneif [ $ip6 -z ]; then echo "get ipv6 address fail" > /tmp/ipv6.logelse curl http://192.168.255.249/1.htm?mv6=$ip6 echo "ipv6 auth success" > /tmp/ipv6.logfiexit 0 å¼€æœºè®¤è¯/etc/rc.local1sh /etc/ipv6-auth.sh å¦å¤–ipv6è®¤è¯ç»´æŒæ—¶é—´æ®æˆ‘è§‚å¯Ÿå¥½åƒæ˜¯12å°æ—¶æ•…è¿˜å¾—å†™ä¸ªå®šæ—¶ä»»åŠ¡/etc/crontabs/root10 */3 * * * /etc/ipv6-auth.sh #æ¯ä¸‰å°æ—¶å‘é€ä¸€æ¬¡è®¤è¯è¯·æ±‚ é‡å¯è·¯ç”±å™¨æµ‹è¯• ping ipv6.google.comä½†æ˜¯è¿™ä¸ªæ—¶å€™åªæ˜¯è·¯ç”±å™¨ipv6è¿žé€šäº†,ä¸‹é¢çš„è®¾å¤‡ipv6ä¾æ—§ä¸é€š,é‰´äºŽè®¤è¯æ–¹å¼åŸºäºŽipv6åœ°å€,æ•…æ— æ³•é‡‡ç”¨ipv6 relay,ipv6 passthrougthæŠ€æœ¯,å¯é€‰çš„åªæœ‰ipv6 nat 0x05 ipv6 NATè¿™éƒ¨åˆ†å‚è€ƒäº†æ¸…åŽå¤§å­¦çš„openwrt ipv6è®¨è®ºè§åœ°å€æŽ¨èé˜…è¯» å®‰è£…éœ€æ±‚åŒ…opkg install ip6tables kmod-ipt-nat6 kmod-ip6tables kmod-ip6tables-extra luci-proto-ipv6 iputils-traceroute6 å¼€å¯é»˜è®¤é€šå‘Š 12uci set dhcp.lan.ra_default='1'uci commit dhcp åŠ å…¥nat6çš„è·¯ç”±è¡¨åœ¨/etc/firewall.useråŠ ä¸Š 12345WAN6=eth0LAN=br-lanip6tables -t nat -A POSTROUTING -o $WAN6 -j MASQUERADEip6tables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPTip6tables -A FORWARD -i $LAN -j ACCEPT WAN6å’ŒLANåˆ†åˆ«æ”¹æˆå¤–ç½‘IPv6å’Œå†…ç½‘ç½‘å¡(interface)çš„åå­—ï¼Œæ³¨æ„ä¸æ˜¯é˜²ç«å¢™åŒºåŸŸ(zone)çš„åå­—ï¼Œä¹Ÿä¸æ˜¯LuCIé‡Œé¢Network->Interfacesé‡Œé¢çœ‹åˆ°çš„åå­—ï¼Œè€Œæ˜¯ifconfigçœ‹åˆ°çš„åå­— é»˜è®¤ç½‘å…³è®¾ç½®æ·»åŠ /etc/hotplug.d/iface/99-ipv6123456#!/bin/sh[ "$ACTION" = ifup ] || exit 0iface=wan6[ -z "$iface" -o "$INTERFACE" = "$iface" ] || exit 0ip -6 route add `ip -6 route show default|sed -e 's/from [^ ]* //'`logger -t IPv6 "Add IPv6 default route." è®°å¾—åŠ å¯æ‰§è¡Œæƒé™chmod +x /etc/hotplug.d/iface/99-ipv6 é‡å¯,æ”¶å·¥å¦‚æžœæ²¡ç‰¹æ®Šæƒ…å†µ,çŽ°åœ¨ä½ çš„è·¯ç”±å™¨å¯ä»¥ä¸‹å‘ipv6åœ°å€äº†,å¹¶ä¸”ipv6å¯ä»¥è¿žé€šäº†,ä½†æ˜¯é’ˆå¯¹æŸäº›ç½‘ç«™(npupt.com)è®¿é—®ä¾æ—§ä¼šå‡ºçŽ°é—®é¢˜,è¿™æ˜¯ç”±äºŽipv6 natä¸‹å‘çš„æ˜¯ç§æœ‰ipv6åœ°å€,ç»è¿‡è½¬æ¢ä¹‹åŽå‡ºåŽ»çš„.æ‰€ä»¥æµè§ˆå™¨é»˜è®¤ä½ æ²¡æœ‰å…¬ç½‘ipv6,å¯¼è‡´couldflareé˜²ç«å¢™è®¤ä¸ºä½ æ²¡æœ‰ipv6åœ°å€é€ æˆçš„.æš‚æ— è§£å†³åŠžæ³•(å·²è§£å†³,è§ä¸‹æ–‡) æµè§ˆå™¨ipv6é—®é¢˜ç»è¿‡æœ‹å‹æé†’,æµè§ˆå™¨æœ‰ä¸€ä¸ªç‰¹æ€§,å®ƒä¸è®¤ fdå¼€å¤´çš„ipv6åœ°å€,å®ƒè®¤ä¸ºä½ æ‹¿çš„æ˜¯ç§æœ‰åœ°å€,æ‰€ä»¥æµè§ˆé¡µé¢ä¸€ç›´ä½¿ç”¨ipv4,ä¹Ÿå°±é€ æˆnpupt.comç­‰åªå…è®¸ipv6çš„ç½‘ç«™ä¸Šä¸åŽ»,æ‰€ä»¥æŠŠfdå¼€å¤´æ”¹æˆddå¼€å¤´å°±å¥½äº†!#ä¿®æ”¹ipv6å‰ç¼€ (ä¿®æ”¹ula_prefixé‚£ä¸€è¡Œ)vim /etc/config/network 12config globals 'globals' option ula_prefix 'dd86:acf7:b93b::/48' 0x06. åŽè®°ä¸ªäººæ–‡ç« ,éš¾å…æœ‰é”™è¯¯,æ¬¢è¿Žå„ä½ç•™è¨€å’ŒæŒ‡æ­£!å½“ç„¶å¦‚æžœä½ æŒ‰ç…§æ­¤æ–‡é…ç½®é‡åˆ°äº†é—®é¢˜,æ¬¢è¿Žç•™è¨€,æˆ‘ä¼šå°½åŠ›å¸®åŠ©!233å®Œç»“äº†!!! FBI Warning æœ¬æ–‡ä»…é™äºŽç ”ç©¶,ä¸å¾—ç”¨äºŽå•†ä¸šç”¨é€”!!!è´Ÿè´£åŽæžœè‡ªè´Ÿ!!! document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Rebuild Blog]]></title>
    <url>%2F2019%2F02%2Frebuild%2F</url>
    <content type="text"><![CDATA[ä»Žå¤´å¼€å§‹éžå¸¸æ‚²å‚¬,ç”±äºŽä¸€æ¬¡è¯¯æ“ä½œ,å¯¼è‡´äº†æˆ‘çš„Blogæºæ–‡ä»¶ä¸¢å¤±.ç„¶åŽç”±äºŽæœ¬äººæ‡’æ•£ ðŸ˜€ ,ä¸€ç›´æ‹–åˆ°çŽ°åœ¨æ‰é‡å»ºBlog. æ–°ç§‘æŠ€ ä¸ºäº†ä¸Šæ¬¡ç»éªŒæ•™è®­é‡‡ç”¨äº†githubä¿å­˜blogæºæ–‡ä»¶ é‡‡ç”¨äº† Travis-CI è‡ªåŠ¨åŒ–éƒ¨ç½² (ðŸ˜) å…·ä½“æµç¨‹tarvis-ciæœåŠ¡å™¨ä¸æ–­åœ°ç›‘å¬blogä¸»çº¿å¼€å‘çš„å˜æ›´å†…å®¹ï¼Œ ä¸€æ—¦æœ‰ä»»ä½•å˜æ›´ï¼ˆå¯ä»¥ç†è§£ä¸º git commit ï¼‰å°±è‡ªåŠ¨è°ƒç”¨æµ‹è¯•å’Œéƒ¨ç½²è„šæœ¬ã€‚ç„¶åŽæˆ‘çš„blogå°±è‡ªåŠ¨æ›´æ–°äº†.(å¥½å¤„å°±æ˜¯å¯ä»¥ç›´æŽ¥åœ¨github webé¡µé¢å†™æ–‡ç« äº†,è€Œä¸”ä¹Ÿä¸éœ€è¦æ‹…å¿ƒå¤šè®¾å¤‡åŒæ­¥é—®é¢˜.2333 é»‘ç§‘æŠ€ä¸? ðŸ˜‰ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>hexo blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
</search>
